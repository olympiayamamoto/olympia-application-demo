<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>値下申請書</title>
<style>
body { font-family: sans-serif; background:#f5f5f5; }
header { background:#003366; color:#fff; padding:10px; }
.container { background:#fff; margin:20px auto; padding:20px; width:900px; }
table { width:100%; border-collapse:collapse; }
td, th { border:1px solid #999; padding:8px; }
input, textarea, select { width:100%; }
.page { display:none; }
.page.active { display:block; }
.nav { margin-top:15px; text-align:center; }
button { padding:8px 20px; margin:5px; }
.stamp { text-align:center; font-weight:bold; }
.footer { margin-top:15px; display:flex; justify-content:space-between; }
</style>
</head>

<body>

<header>
  ログイン中：<span id="userName"></span>
</header>

<div class="container">

<h2>値下申請書</h2>

<!-- ページ表示 -->
<div id="pageInfo"></div>

<!-- ページ1 -->
<div class="page active">
<table>
<tr><th colspan="2">商品情報</th></tr>
<tr>
<td>店舗名（自動）</td>
<td><span id="storeName"></span></td>
</tr>
<tr>
<td>商品名（入力）</td>
<td><input id="product"></td>
</tr>
<tr>
<td>数量（1〜100）</td>
<td>
<select id="qty">
<option value="">選択</option>
<script>
for(let i=1;i<=100;i++){
 document.write(`<option>${i}</option>`);
}
</script>
</select>
</td>
</tr>
</table>
</div>

<!-- ページ2 -->
<div class="page">
<table>
<tr><th colspan="2">陳列情報</th></tr>
<tr>
<td>陳列位置</td>
<td>
<select id="place">
<option value="">選択</option>
<option>棚前</option>
<option>棚後</option>
</select>
</td>
</tr>
<tr>
<td>値下理由</td>
<td><textarea id="reason"></textarea></td>
</tr>
</table>
</div>

<!-- ページ3 -->
<div class="page">
<table>
<tr><th colspan="2">価格</th></tr>
<tr>
<td>値下前価格</td>
<td><input type="number" id="before"></td>
</tr>
<tr>
<td>値下後価格</td>
<td><input type="number" id="after"></td>
</tr>
</table>
</div>

<!-- ページ4 -->
<div class="page">
<table>
<tr><th colspan="2">備考</th></tr>
<tr>
<td colspan="2"><textarea id="note"></textarea></td>
</tr>
</table>
</div>

<!-- ページ5 -->
<div class="page">
<table>
<tr><th colspan="3">承認欄</th></tr>
<tr>
<th>AM</th><th>本部</th><th>社長</th>
</tr>
<tr>
<td class="stamp" id="am"></td>
<td class="stamp" id="hq"></td>
<td class="stamp" id="president"></td>
</tr>
</table>
</div>

<div class="footer">
  <div id="pageCount"></div>
  <div>
    <button onclick="prev()">前へ</button>
    <button onclick="next()">次へ</button>
    <button onclick="submitForm()">申請</button>
  </div>
</div>

</div>

<script>
const user = {
 name:"サカエチカ店",
 role:"user"
};

document.getElementById("userName").textContent = user.name;
document.getElementById("storeName").textContent = user.name;

let current = 0;
const pages = document.querySelectorAll(".page");

function render(){
 pages.forEach((p,i)=>p.classList.toggle("active",i===current));
 document.getElementById("pageInfo").textContent = `ページ ${current+1} / 5`;
 document.getElementById("pageCount").textContent = `${current+1} / 5`;
}
render();

function next(){ if(current<4){ save(); current++; render(); } }
function prev(){ if(current>0){ save(); current--; render(); } }

function save(){
 const data = {
 product:product.value,
 qty:qty.value,
 place:place.value,
 reason:reason.value,
 before:before.value,
 after:after.value,
 note:note.value
 };
 localStorage.setItem("draft",JSON.stringify(data));
}

function load(){
 const d = JSON.parse(localStorage.getItem("draft")||"{}");
 product.value=d.product||"";
 qty.value=d.qty||"";
 place.value=d.place||"";
 reason.value=d.reason||"";
 before.value=d.before||"";
 after.value=d.after||"";
 note.value=d.note||"";
}
load();

function submitForm(){
 save();
 alert("エリアマネージャー確認中として申請されました");
 document.getElementById("am").textContent="承認";
}
</script>

</body>
</html>
